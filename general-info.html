<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>General Information</title>
    <link rel="stylesheet" href="general-info.css">
</head>
<body>
    <div id="generalInfoContainer">
        <div class="toolbar">
            <button id="toolbarNewPatientBtn">+ Neuer Patient</button>
            <button id="addNoteBoxBtn">+ Notiz hinzufügen</button>
            <button id="toolbarShowArchiveModalBtn">Vorlage / Archiv</button>
            <button id="archiveCurrentPatientBtn">Aktuellen Patienten archivieren</button>
        </div>

        <h2>Allgemeine Patienteninformationen</h2>
        <div class="info-container">
            <div class="info-box personal">
                <h3>Patientenakte</h3>
                <div class="patient-details-grid">
                    <p><strong>Name:</strong> <span id="patientName">Bitte Patient auswählen</span></p>
                    <p><strong>Geburtsdatum:</strong> <span id="patientDob"></span></p>
                    <p><strong>Geschlecht:</strong> <span id="patientGender"></span></p>
                    <p><strong>Kontakt:</strong> <span id="patientContact"></span></p>
                    <p><strong>Patienten-ID:</strong> <span id="patientId"></span></p>
                    <p><strong>Geburtsort:</strong> <span id="patientBirthplace"></span></p>
                    <p><strong>Stadt:</strong> <span id="patientCity"></span></p>
                    <p><strong>Krankenkasse:</strong> <span id="patientInsurance"></span></p>
                    <p class="full-width"><strong>Vorläufige Diagnose:</strong> <span id="patientDiagnosis"></span></p>
                    <p class="full-width"><strong>Aktuelles Krankheitsbild:</strong> <span id="patientHistory"></span></p>
                    <p class="full-width"><strong>Bisherige Behandlungen:</strong> <span id="patientTreatments"></span></p>
                </div>
                <div class="patient-actions">
                    <button id="selectPatientBtn">Patient auswählen</button>
                    <button id="clearPatientSelectionBtn" style="display:none;">Patient abwählen</button>
                    <button id="editPatientBtn" style="display:none;">Patientendaten bearbeiten</button> <button id="deletePatientBtn" style="display:none;">Patient löschen</button>
                </div>
            </div>

            <div class="info-box">
                <h3>Behandlungsfortschritt</h3>
                <p>Komplettierungsgrad: <span id="progressPercentage">0%</span></p>
                <div class="progress-bar">
                    <div class="progress" id="progressBar"></div>
                </div>
                <p>Nächster Schritt: <span id="nextStep">Patientendaten vervollständigen</span></p>
            </div>

            <div class="info-box notes-box full-width">
                <h3>Patientennotizen</h3>
                <div id="patientNotesContainer" class="notes-content">
                    <textarea class="note-textarea" rows="4" placeholder="Kein Patient ausgewählt. Notizen nicht verfügbar." disabled></textarea>
                </div>
                <button id="savePatientNotesBtn" disabled>Notizen speichern</button>
            </div>
        </div>

        <div id="patientSelectionModal" class="modal">
            <div class="modal-content">
                <span class="close-button" id="closePatientSelectionModal">&times;</span>
                <h2>Patienten auswählen</h2>
                <input type="text" id="patientSearchInput" placeholder="Suchen nach Name oder ID..." style="width: calc(100% - 22px); padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px;">
                <ul id="patientList" class="modal-list-group">
                </ul>
            </div>
        </div>

        <div id="newPatientModal" class="modal">
            <div class="modal-content">
                <span class="close-button" id="closeNewPatientModal">&times;</span>
                <h3 id="newPatientModalTitle">Neuen Patienten anlegen</h3> <form id="newPatientForm">
                    <label for="newFirstName">Vorname</label>
                    <input id="newFirstName" name="first" required>

                    <label for="newLastName">Nachname</label>
                    <input id="newLastName" name="last" required>

                    <label for="newDob">Geburtsdatum</label>
                    <input id="newDob" name="dob" type="date" required>

                    <label for="newGender">Geschlecht:</label>
                    <select id="newGender" name="gender" required>
                        <option value="">Wählen Sie...</option>
                        <option value="männlich">Männlich</option>
                        <option value="weiblich">Weiblich</option>
                        <option value="divers">Divers</option>
                    </select>

                    <label for="newContact">Kontakt:</label>
                    <input type="text" id="newContact" name="contact" placeholder="Telefon oder E-Mail" required>

                    <label for="newBirthplace">Geburtsort</label>
                    <input id="newBirthplace" name="birthplace">

                    <label for="newCity">Stadt</label>
                    <input id="newCity" name="city">

                    <label for="newInsurance">Krankenkasse</label>
                    <input id="newInsurance" name="insurance">

                    <label for="newDiagnosis">Vorläufige Diagnose:</label>
                    <textarea id="newDiagnosis" name="diagnosis" rows="3" placeholder="Kurze Beschreibung"></textarea>

                    <label for="newHistory">Aktuelles Krankheitsbild</label>
                    <textarea id="newHistory" name="history" rows="3"></textarea>

                    <label for="newTreatments">Bisherige Behandlungen</label>
                    <textarea id="newTreatments" name="treatments" rows="3"></textarea>

                    <div class="actions">
                        <button type="button" class="cancel" id="cancelNewPatientBtn">Abbrechen</button>
                        <button type="submit" class="save">Speichern</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="archiveModal" class="modal">
            <div class="modal-content">
                <span class="close-button" id="closeArchiveModal">&times;</span>
                <h3>Vorlagen</h3>
                <ul id="templateList" class="modal-list-group">
                </ul>
                <hr>
                <h3>Archivierte Patienten</h3>
                <ul id="archiveList" class="modal-list-group">
                </ul>
                <button id="archiveModalCloseBtn">Schließen</button>
            </div>
        </div>
    </div>

    <script src="patient-store.js"></script>
    <script src="general-info.js"></script>
</body>
</html>